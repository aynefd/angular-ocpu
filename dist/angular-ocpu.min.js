/**
 * angular-ocpu
 * @version v0.1.0 - 2015-03-13
 * @link http://bbroeksema.github.io/angular-ocpu
 * @author Bertjan Broeksema (dev@broeksemaatjes.nl)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(r,t,e){"use strict";angular.module("opencpu",[]).service("$ocpu",["$http","$q",function(r,o){function n(t,e,o){var n={location:t,key:e,data:o};return n.toString=function(){return"Session"},n.getObject=function(e){return r.get(t+"R/"+(e||".val")+"/json")},n}function s(r){return function(t,e){r.reject("OpenCPU error HTTP "+e+"\n"+t)}}function i(t,e){var i=u.rPath.href+"/"+t,c=o.defer();if(!t)throw"rFunctionCall called without fun";return r.post(i,e||{}).success(function(r,t,e){var o=e("Location")||c.reject("OpenCPU error: Location response header missing."),s=e("X-ocpu-session")||c.reject("OpenCPU error: X-ocpu-session response header missing.");c.resolve(n(o,s,r))}).error(s(c)),c.promise}function c(r,t){var e=o.defer();return i(r,t).then(function(r){r.getObject().success(e.resolve).error(s(e))},function(r){e.reject(r)}),e.promise}function a(r){if(!r.match("/R$"))throw"ERROR! Trying to set R url to: "+r+". Path to an OpenCPU R package must end with '/R'";if(u.rPath=t.createElement("a"),u.rPath.href=r,(location.protocol!==u.rPath.protocol||location.host!==u.rPath.host)&&(u.rCors=!0,(new XMLHttpRequest).withCredentials===e))throw"This browser does not support CORS. Try using Firefox or Chrome.";if("https:"===location.protocol&&"https:"!==u.rPath.protocol)throw"Page is hosted on HTTPS but using a (non-SSL) HTTP OpenCPU server. This is insecure and most browsers will not allow this."}var u={rPath:t.createElement("a"),rCors:!1},h={};return u.rPath.href="../R",h.call=i,h.rpc=c,h.seturl=a,h}])}(window,document);
//# sourceMappingURL=angular-ocpu.min.js.map